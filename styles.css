:root{
  --bg:#0b0f14;--muted:#121820;--panel:#0f141b;--text:#e6edf3;--weak:#9fb0c0;
  --primary:#2eaadc;--ok:#18b26b;--warn:#f2c744;--danger:#ff6b6b;--line:#1b2430;
}
:root.light{
  --bg:#f7f9fc;--muted:#f0f3f8;--panel:#ffffff;--text:#1d2430;--weak:#6b7a8a;
  --primary:#1f84c7;--ok:#14a360;--warn:#e2b230;--danger:#e94c4c;--line:#e7edf4;
}
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu;
     background:var(--bg);color:var(--text)}
.app-header{position:sticky;top:0;z-index:20;display:flex;align-items:center;
  justify-content:space-between;padding:10px 16px;background:var(--panel);
  border-bottom:1px solid var(--line)}
.brand{display:flex;gap:10px;align-items:center;font-weight:700}
.header-actions{display:flex;gap:8px;align-items:center}
.badge{font-size:12px;padding:4px 8px;border-radius:8px;background:var(--muted);color:var(--weak)}
.badge.success{background:rgba(24,178,107,.15);color:var(--ok)}
.badge.warn{background:rgba(242,199,68,.15);color:var(--warn)}
.badge.danger{background:rgba(233,76,76,.15);color:var(--danger)}

.app-main{display:grid;grid-template-columns:320px 1fr;height:calc(100vh - 106px)}
.sidebar{overflow:auto;border-right:1px solid var(--line);background:var(--muted)}
.panel{padding:12px;border-bottom:1px solid var(--line)}
.panel-title{font-weight:700;margin-bottom:8px}
.form-row{display:flex;flex-direction:column;gap:6px;margin:10px 0}
.form-row input,.form-row select{padding:8px;border-radius:8px;border:1px solid var(--line);
  background:var(--panel);color:var(--text)}
.chk{display:flex;gap:8px;align-items:center;color:var(--weak)}
.buttons{display:flex;gap:8px}
.btn{padding:8px 10px;border-radius:8px;border:1px solid var(--line);background:var(--panel);
  color:var(--text);cursor:pointer}
.btn:hover{filter:brightness(1.1)}
.btn.ghost{background:transparent}
.btn.primary{background:var(--primary);border-color:var(--primary);color:#fff}

.users{display:flex;flex-direction:column;gap:8px}
.user-item{padding:8px;border-radius:10px;background:var(--panel);border:1px solid var(--line);cursor:pointer}
.user-item:hover{outline:2px solid rgba(46,170,220,.25)}
.user-head{display:flex;justify-content:space-between;align-items:center;font-weight:600}
.user-meta{font-size:12px;color:var(--weak);margin-top:4px}
.badge.online{color:var(--ok);background:rgba(24,178,107,.12)}
.badge.idle{color:var(--warn);background:rgba(242,199,68,.12)}
.badge.offline{color:#999;background:rgba(120,120,120,.12)}

.map-wrap{position:relative}
#map{position:absolute;inset:0}
.legend{position:absolute;left:10px;bottom:10px;z-index:10;display:flex;gap:12px;
  background:var(--panel);border:1px solid var(--line);border-radius:10px;padding:6px 10px;color:var(--weak)}
.playback{position:absolute;right:10px;bottom:10px;z-index:10;background:var(--panel);
  border:1px solid var(--line);border-radius:10px;padding:8px}
.playback-row{display:flex;gap:8px;align-items:center}
.playback select,.playback input{padding:6px;border-radius:8px;border:1px solid var(--line);
  background:var(--muted);color:var(--text)}

.app-footer{height:46px;display:flex;gap:10px;align-items:center;justify-content:center;
  border-top:1px solid var(--line);background:var(--panel);color:var(--weak)}
/* Marker colores por velocidad */
.leaflet-marker-icon.speed-slow{filter:hue-rotate(40deg)}
.leaflet-marker-icon.speed-fast{filter:hue-rotate(-40deg)}
